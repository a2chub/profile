# 戦略・方針

## ビジョン

**「反復作業をゼロに、創造的作業に集中できる環境を構築する」**

コマンドヒストリーから行動パターンを学習し、
適切な自動化レベルで作業を効率化するシステムを構築する。

---

## 基本原則

### 1. コスト効率優先

```
┌─────────────────────────────────────────────────────┐
│              コスト最適化の階層                      │
├─────────────────────────────────────────────────────┤
│                                                      │
│  Level 0: シェルスクリプト/関数/エイリアス          │
│           → コスト: 0、遅延: 最小                   │
│                                                      │
│  Level 1: Haiku エージェント                        │
│           → コスト: 低、簡単な判断                  │
│                                                      │
│  Level 2: Sonnet エージェント                       │
│           → コスト: 中、複雑な推論                  │
│                                                      │
│  Level 3: Opus エージェント                         │
│           → コスト: 高、高度な分析                  │
│                                                      │
└─────────────────────────────────────────────────────┘
```

**選択基準:**
- 決定的な処理 → Level 0
- 単純な分岐判断 → Level 1
- 文脈理解が必要 → Level 2
- 創造的・分析的 → Level 3

### 2. データ駆動

- 推測ではなく実データに基づく判断
- 定量的なメトリクスで効果測定
- 継続的なフィードバックループ

### 3. 段階的導入

- 小さく始めて効果を確認
- 成功パターンを横展開
- 失敗は早期に検出・修正

### 4. 人間中心

- 自動化は補助であり、最終判断は人間
- 透明性のある動作（何をしているか明示）
- いつでも手動に切り替え可能

---

## エージェント分類戦略

### A. 汎用エージェント（高頻度・低複雑度）

**特徴:**
- 日常的に繰り返す定型作業
- 判断がほぼ不要
- シェルスクリプトで実装

**例:**
| 名称 | トリガー | 動作 |
|------|---------|------|
| `git-sync` | 作業開始時 | fetch → pull → status |
| `docker-refresh` | 起動失敗時 | down → prune → up |
| `dev-env-check` | 朝一番 | 各種サービス確認 |

### B. 専門エージェント（中頻度・中複雑度）

**特徴:**
- 特定の作業フローに特化
- ある程度の判断が必要
- Haiku/Sonnet で実装

**例:**
| 名称 | 用途 |
|------|------|
| `project-setup` | 新規プロジェクト初期化 |
| `dependency-update` | パッケージ更新・テスト |
| `log-analyzer` | エラーログ分析・報告 |

### C. 高度エージェント（低頻度・高複雑度）

**特徴:**
- 複雑な判断・分析が必要
- 創造的な提案を期待
- Sonnet/Opus で実装

**例:**
| 名称 | 用途 |
|------|------|
| `code-review` | PRレビュー支援 |
| `debug-assistant` | 複雑なバグ調査 |
| `architecture-advisor` | 設計相談 |

---

## 自動化判定フレームワーク

### 自動化候補の評価軸

```
              自動化効果: 高
                    │
        ┌───────────┼───────────┐
        │    即時    │   計画     │
        │   自動化   │   自動化   │
頻度:高 ─┼───────────┼───────────┼─ 頻度:低
        │   検討     │   保留     │
        │           │           │
        └───────────┼───────────┘
                    │
              自動化効果: 低
```

### 評価チェックリスト

| 質問 | Yes → | No → |
|------|-------|------|
| 週に3回以上実行する？ | +2点 | +0点 |
| 手順が5ステップ以上？ | +2点 | +0点 |
| ミスが起きやすい？ | +2点 | +0点 |
| 結果が予測可能？ | +1点 | -1点 |
| 例外処理が少ない？ | +1点 | -1点 |

**判定:**
- 6点以上 → 即時自動化
- 4-5点 → 計画的に自動化
- 3点以下 → 保留（手動継続）

---

## 成功指標（KPI）

### 短期（3ヶ月）

| 指標 | 目標 |
|------|------|
| 分析スクリプト完成 | 2本以上 |
| 汎用エージェント稼働 | 3個以上 |
| ヒストリーデータ蓄積 | 5,000行以上 |

### 中期（6ヶ月）

| 指標 | 目標 |
|------|------|
| 反復作業時間 | 30%削減 |
| 専門エージェント稼働 | 2個以上 |
| AIコスト | 最適化開始 |

### 長期（12ヶ月）

| 指標 | 目標 |
|------|------|
| 反復作業時間 | 50%削減 |
| 作業標準化率 | 80%以上 |
| 新規パターン自動検出 | 稼働 |

---

## リスクと対策

| リスク | 影響 | 対策 |
|--------|------|------|
| 過剰自動化 | 柔軟性低下 | 段階的導入、手動切替可能 |
| AIコスト増大 | 予算超過 | Level選択基準の厳守 |
| データ不足 | 分析精度低下 | 最低3ヶ月の蓄積期間 |
| 複雑化 | 保守困難 | シンプルさ優先、ドキュメント化 |

---

## 更新履歴

| 日付 | 変更内容 |
|------|---------|
| 2024-12-29 | 初版作成 |
